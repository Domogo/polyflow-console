<div
  *ngIf="visibility$ | async as visibility"
  class="w-full flex flex-row gap-x-2 z-0 text-xs font-semibold"
>
  <div
    class="relative flex flex-col rounded-[10px] cursor-pointer dark:bg-[#0D0D0D]"
  >
    <div
      (click)="setVisibility('timeframe')"
      class="px-4 py-3 rounded-lg border transition-all flex flex-row items-center gap-x-2 text-sm font-normal text-[#777A9B] dark:border-[#9994D94D]"
    >
      <div>Last {{ selectedTimeframe }}</div>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="3"
          stroke="currentColor"
          class="w-3 h-3 text-[#777A9B]"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 8.25l-7.5 7.5-7.5-7.5"
          />
        </svg>
      </div>
    </div>
    <div
      class="absolute mt-12 rounded-lg bg-white border w-full border-indigo-100 dark:bg-[#0D0D0D] dark:border-[#9994D94D]"
      *ngIf="visibility === 'timeframe'"
    >
      <div
        class="hover:bg-indigo-50 w-full text-indigo-600 dark:text-[#777A9B] py-3 text-center border-indigo-100 dark:hover:bg-zinc-800"
        *ngFor="let item of timeframeFilterItems"
        (click)="timeFrameFilterClicked(item)"
      >
        {{ item }}
      </div>
    </div>
  </div>

  <div
    class="relative hidden flex flex-col text-indigo-700 rounded-lg cursor-pointer"
  >
    <div
      (click)="setVisibility('discriminator')"
      class="px-6 py-3 rounded-lg border transition-all flex flex-row items-center justify-center gap-x-2 hover:bg-indigo-700 hover:text-white"
    >
      <div>Split By {{ selectedDiscriminator }}</div>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="3"
          stroke="currentColor"
          class="w-3 h-3"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 8.25l-7.5 7.5-7.5-7.5"
          />
        </svg>
      </div>
    </div>
    <div
      class="absolute mt-12 rounded-lg w-full bg-white border border-indigo-100"
      *ngIf="visibility === 'discriminator'"
    >
      <div
        class="hover:bg-indigo-50 px-6 text-indigo-600 py-3 w-full text-center border-indigo-100"
        *ngFor="let item of discriminatorFilterItems"
        (click)="discriminatorFilterClicked(item)"
      >
        {{ item }}
      </div>
    </div>
  </div>

  <div
    *ngIf="selectedDiscriminator !== 'Nothing'"
    class="relative flex flex-col text-indigo-700 rounded-lg cursor-pointer"
  >
    <div
      (click)="setVisibility('topN')"
      class="px-6 py-3 rounded-lg border transition-all flex flex-row items-center justify-center gap-x-2 hover:bg-indigo-700 hover:text-white"
    >
      <div>{{ selectedTopN }}</div>
      <div>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="3"
          stroke="currentColor"
          class="w-3 h-3"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M19.5 8.25l-7.5 7.5-7.5-7.5"
          />
        </svg>
      </div>
    </div>
    <div
      class="absolute mt-12 rounded-lg w-full bg-white border border-indigo-100"
      *ngIf="visibility === 'topN'"
    >
      <div
        class="hover:bg-indigo-50 px-6 text-indigo-600 py-3 w-full text-center border-indigo-100"
        *ngFor="let item of topNFilterItems"
        (click)="topNFilterClicked(item)"
      >
        {{ item }}
      </div>
    </div>
  </div>
</div>
