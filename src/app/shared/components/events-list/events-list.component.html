<div
  class="w-full bg-white dark:bg-[#0D0D0D] dark:text-[#D9E2F2] p-8 rounded-3xl shadow-sm text-xs"
>
  <div *ngIf="events$ | async as events" class="flex flex-col gap-6">
    <div class="flex flex-row w-full justify-between">
      <p class="text-2xl font-semibold leading-[34px]">Event history</p>
      <form [formGroup]="eventTypeFilterForm" class="flex flex-row gap-x-2">
        <button
          class="py-[6px] px-3 flex flex-row gap-1 border-[1.5px] border-[#777A9B] rounded-md text-sm font-normal items-center text-[#777A9B]"
          (click)="toggleCheckbox('walletConnected')"
          [class.bg-gray-700]="
            eventTypeFilterForm.controls['walletConnected'].value === true
          "
          [class.text-slate-50]="
            eventTypeFilterForm.controls['walletConnected'].value === true
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="
              eventTypeFilterForm.controls['walletConnected'].value === true
            "
          >
            <path
              d="M6 8.5L7.5 10L10 6.5M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="
              eventTypeFilterForm.controls['walletConnected'].value === false
            "
          >
            <path
              d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="#777A9B"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          Wallet Connected
        </button>
        <button
          class="py-[6px] px-3 flex flex-row gap-1 border-[1.5px] border-[#777A9B] rounded-md text-sm font-normal items-center text-[#777A9B]"
          (click)="toggleCheckbox('userLanded')"
          [class.bg-gray-700]="
            eventTypeFilterForm.controls['userLanded'].value === true
          "
          [class.text-slate-50]="
            eventTypeFilterForm.controls['userLanded'].value === true
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['userLanded'].value === true"
          >
            <path
              d="M6 8.5L7.5 10L10 6.5M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['userLanded'].value === false"
          >
            <path
              d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="#777A9B"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          User Landed
        </button>
        <button
          class="py-[6px] px-3 flex flex-row gap-1 border-[1.5px] border-[#777A9B] rounded-md text-sm font-normal items-center text-[#777A9B]"
          (click)="toggleCheckbox('genericError')"
          [class.bg-gray-700]="
            eventTypeFilterForm.controls['genericError'].value === true
          "
          [class.text-slate-50]="
            eventTypeFilterForm.controls['genericError'].value === true
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['genericError'].value === true"
          >
            <path
              d="M6 8.5L7.5 10L10 6.5M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['genericError'].value === false"
          >
            <path
              d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="#777A9B"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          Generic Error
        </button>
        <button
          class="py-[6px] px-3 flex flex-row gap-1 border-[1.5px] border-[#777A9B] rounded-md text-sm font-normal items-center text-[#777A9B]"
          (click)="toggleCheckbox('txRequested')"
          [class.bg-gray-700]="
            eventTypeFilterForm.controls['txRequested'].value === true
          "
          [class.text-slate-50]="
            eventTypeFilterForm.controls['txRequested'].value === true
          "
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['txRequested'].value === true"
          >
            <path
              d="M6 8.5L7.5 10L10 6.5M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="white"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            *ngIf="eventTypeFilterForm.controls['txRequested'].value === false"
          >
            <path
              d="M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z"
              stroke="#777A9B"
              stroke-width="1.2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>

          <div>TX Requested</div>
        </button>
      </form>
    </div>

    <div>
      <div
        class="flex px-4 mb-2 text-xs flex-row uppercase font-semibold dark:text-[#777A9B]"
      >
        <div class="w-1/12">Time</div>
        <div class="w-2/12 text-center">Type</div>
        <div class="w-2/12 text-center">Wallet</div>
        <div class="w-2/12 text-center">Network</div>
        <div class="w-5/12 pl-2">Details</div>
      </div>
      <div
        class="flex flex-row w-full border dark:border-[#9994D94D] rounded-xl cursor-pointer p-4 items-center mb-2"
        *ngFor="let event of events"
      >
        <div
          class="w-full flex flex-row items-center"
          *ngIf="event.tracker.eventTracker === 'USER_LANDED'"
          routerLink="/console/event-details/{{ event.id }}"
        >
          <div
            class="w-full flex flex-row items-center text-center"
            *ngIf="castToUserLandedEvent(event) as userLandedEvent"
          >
            <div
              class="w-1/12 flex flex-row gap-1 text-xs font-medium leading-3"
            >
              <p class="bg-[#F2F1FB] dark:bg-[#9994D94D] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : "MM/dd/yy" }}
              </p>
              <p class="bg-[#F2F1FB]dark:bg-[#9994D94D] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : " HH:mm" }}
              </p>
            </div>
            <div class="w-2/12 text-sm font-medium text-center">
              User Landed
            </div>
            <div class="w-2/12 flex flex-row justify-center">
              <p
                class="font-medium text-sm"
                *ngIf="userLandedEvent.userLandedWallet as wallet"
              >
                {{ wallet.walletAddress | shorten : 6 : 6 }}
              </p>
            </div>
            <div
              class="w-2/12 font-medium flex flex-row gap-x-2 text-sm justify-center capitalize"
            >
              <ng-component
                *ngIf="userLandedEvent.userLandedNetwork as network"
              >
                <app-icon-item-holder
                  type="network"
                  [iconQuery]="network.chainId.toString()"
                ></app-icon-item-holder>
                {{ getNetwork(network.chainId)?.name }}
              </ng-component>
            </div>
            <div class="flex flex-row w-5/12 items-center pl-5">
              <div
                class="flex flex-col w-3/5 text-start gap-[2px]"
                *ngIf="userLandedEvent.userLandedWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Gas balance
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.gasBalance }}
                </p>
              </div>
              <div
                class="flex flex-col gap-[2px] w-full text-start"
                *ngIf="userLandedEvent.userLandedWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Nonce
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.nonce }}
                </p>
              </div>
            </div>
          </div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.20938 14.7698C6.92228 14.4713 6.93159 13.9965 7.23017 13.7094L11.1679 10L7.23017 6.29062C6.93159 6.00353 6.92228 5.52875 7.20938 5.23017C7.49647 4.93159 7.97125 4.92228 8.26983 5.20937L12.7698 9.45937C12.9169 9.60078 13 9.79599 13 10C13 10.204 12.9169 10.3992 12.7698 10.5406L8.26983 14.7906C7.97125 15.0777 7.49647 15.0684 7.20938 14.7698Z"
              fill="#273143"
            />
          </svg>
        </div>
        <div
          class="w-full flex flex-row items-center"
          *ngIf="event.tracker.eventTracker === 'WALLET_CONNECT'"
          routerLink="/console/event-details/{{ event.id }}"
        >
          <div
            class="w-full flex flex-row items-center text-center"
            *ngIf="castToWalletConnectedEvent(event) as walletConnectedEvent"
          >
            <div
              class="w-1/12 flex flex-row gap-1 text-xs font-medium leading-3"
            >
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : "MM/dd/yy" }}
              </p>
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : " HH:mm" }}
              </p>
            </div>
            <div class="w-2/12 text-sm font-medium text-center">
              Wallet Connected
            </div>
            <div class="w-2/12 flex flex-row justify-center">
              <p class="font-medium text-sm">
                {{
                  walletConnectedEvent.walletConnectedWallet.walletAddress
                    | shorten : 6 : 6
                }}
              </p>
            </div>
            <div
              class="w-2/12 font-medium flex flex-row gap-x-2 text-sm justify-center capitalize"
            >
              <ng-component
                *ngIf="walletConnectedEvent.walletConnectedNetwork as network"
              >
                <app-icon-item-holder
                  type="network"
                  [iconQuery]="network.chainId.toString()"
                ></app-icon-item-holder>
                {{ getNetwork(network.chainId)?.name }}
              </ng-component>
            </div>
            <div class="flex flex-row w-5/12 items-center pl-5">
              <div
                class="flex flex-col w-3/5 text-start gap-[2px]"
                *ngIf="walletConnectedEvent.walletConnectedWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Gas balance
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.gasBalance }}
                </p>
              </div>
              <div
                lass="flex flex-col gap-[2px] w-full text-start"
                *ngIf="walletConnectedEvent.walletConnectedWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Nonce
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.nonce }}
                </p>
              </div>
            </div>
          </div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.20938 14.7698C6.92228 14.4713 6.93159 13.9965 7.23017 13.7094L11.1679 10L7.23017 6.29062C6.93159 6.00353 6.92228 5.52875 7.20938 5.23017C7.49647 4.93159 7.97125 4.92228 8.26983 5.20937L12.7698 9.45937C12.9169 9.60078 13 9.79599 13 10C13 10.204 12.9169 10.3992 12.7698 10.5406L8.26983 14.7906C7.97125 15.0777 7.49647 15.0684 7.20938 14.7698Z"
              fill="#273143"
            />
          </svg>
        </div>

        <div
          class="w-full flex flex-row items-center"
          *ngIf="event.tracker.eventTracker === 'TX_REQUEST'"
          routerLink="/console/event-details/{{ event.id }}"
        >
          <div
            class="w-full flex flex-row items-center text-center"
            *ngIf="castToTxRequestEvent(event) as txRequestEvent"
          >
            <div
              class="w-1/12 flex flex-row gap-1 text-xs font-medium leading-3"
            >
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : "MM/dd/yy" }}
              </p>
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : " HH:mm" }}
              </p>
            </div>
            <div class="w-2/12 text-sm font-medium text-center">
              > Tx Requested
            </div>
            <div class="w-2/12 flex flex-row justify-center">
              <p class="font-medium text-sm">
                {{
                  txRequestEvent.txRequestWallet.walletAddress | shorten : 6 : 6
                }}
              </p>
            </div>
            <div
              class="w-2/12 font-medium flex flex-row gap-x-2 text-sm justify-center capitalize"
              *ngIf="
                txRequestEvent.txRequestNetwork as network;
                else unknownNetwork
              "
            >
              <app-icon-item-holder
                [iconQuery]="network.chainId.toString()"
                type="network"
              ></app-icon-item-holder>
              {{ getNetwork(network.chainId)?.name }}
            </div>
            <ng-template #unknownNetwork>
              <div class="w-2/12 uppercase font-medium flex flex-row gap-x-2">
                Network not provided
              </div>
            </ng-template>
            <div class="flex flex-row w-5/12 items-center pl-5">
              <div
                class="flex flex-col w-3/5 text-start gap-[2px]"
                *ngIf="txRequestEvent.txRequestWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Gas balance
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.gasBalance }}
                </p>
              </div>
              <div
                class="flex flex-col gap-[2px] w-full text-start"
                *ngIf="txRequestEvent.txRequestWallet as wallet"
              >
                <p class="text-xs font-medium leading-3 text-[#777A9B]">
                  Nonce
                </p>
                <p class="text-sm font-medium leading-5">
                  {{ wallet.nonce }}
                </p>
              </div>
            </div>
          </div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.20938 14.7698C6.92228 14.4713 6.93159 13.9965 7.23017 13.7094L11.1679 10L7.23017 6.29062C6.93159 6.00353 6.92228 5.52875 7.20938 5.23017C7.49647 4.93159 7.97125 4.92228 8.26983 5.20937L12.7698 9.45937C12.9169 9.60078 13 9.79599 13 10C13 10.204 12.9169 10.3992 12.7698 10.5406L8.26983 14.7906C7.97125 15.0777 7.49647 15.0684 7.20938 14.7698Z"
              fill="#273143"
            />
          </svg>
        </div>
        <div
          class="w-full flex flex-row items-center"
          routerLink="/console/event-details/{{ event.id }}"
          *ngIf="event.tracker.eventTracker === 'GENERIC_ERROR'"
        >
          <div
            class="w-full flex flex-row items-center text-center"
            *ngIf="castToErrorEvent(event) as errorEvent"
          >
            <div
              class="w-1/12 flex flex-row gap-1 text-xs font-medium leading-3"
            >
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : "MM/dd/yy" }}
              </p>
              <p class="bg-[#F2F1FB] rounded-md p-[6px]">
                {{ event.createdAtParsed | date : " HH:mm" }}
              </p>
            </div>
            <div class="w-2/12 text-sm font-medium text-center">
              Generic Error
            </div>
            <div class="w-2/12 flex flex-row justify-center">
              <p
                class="font-medium text-sm"
                *ngIf="errorEvent.errorEventWallet?.walletAddress as address"
              >
                {{ address | shorten : 6 : 6 }}
              </p>
            </div>
            <div
              class="w-2/12 font-medium flex flex-row gap-x-2 text-sm justify-center capitalize"
            >
              <ng-component *ngIf="errorEvent.errorEventNetwork as network">
                <app-icon-item-holder
                  type="network"
                  [iconQuery]="network.chainId.toString()"
                ></app-icon-item-holder>
                {{ getNetwork(network.chainId)?.name }}
              </ng-component>
            </div>
            <div
              class="flex flex-row w-5/12 items-center pl-5 text-sm font-medium leading-5 text-[#E74090]"
            >
              {{ errorEvent.errors.at(0)?.slice(0, 55) }}...
            </div>
          </div>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.20938 14.7698C6.92228 14.4713 6.93159 13.9965 7.23017 13.7094L11.1679 10L7.23017 6.29062C6.93159 6.00353 6.92228 5.52875 7.20938 5.23017C7.49647 4.93159 7.97125 4.92228 8.26983 5.20937L12.7698 9.45937C12.9169 9.60078 13 9.79599 13 10C13 10.204 12.9169 10.3992 12.7698 10.5406L8.26983 14.7906C7.97125 15.0777 7.49647 15.0684 7.20938 14.7698Z"
              fill="#273143"
            />
          </svg>
        </div>
      </div>
    </div>
    <div
      class="w-full text-center mt-8 bg-amber-50 py-4 text-amber-700 font-medium uppercase text-xs rounded-lg"
      *ngIf="events.length === 0"
    >
      No events logged for this query
    </div>
  </div>
</div>
